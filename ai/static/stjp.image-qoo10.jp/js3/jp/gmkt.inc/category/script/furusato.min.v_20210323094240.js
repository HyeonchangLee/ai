// (c)2021 eBay Japan

var furusato_notice_timer;$(document).ready(function(e){FurusatoMain.InitializeElementSetting();FurusatoMain.InitEventFunctionSetting();FurusatoNoticeAutoRolling();});function FurusatoNoticeAutoRolling(){furusato_notice_timer=setInterval(function(){FurusatoMain.autoNoticeRolling();},2000);}
var FurusatoMain={InitializeElementSetting:function(){var furusato_simulation_amt_value=Util.getCookie("furusato_simulation_amt");if(furusato_simulation_amt_value!=undefined&&furusato_simulation_amt_value!=""){$("#input_modify").val(PriceUtil.FormatNumber(furusato_simulation_amt_value));$("#span_furusato_limit_amt").html(PriceUtil.FormatCurrencySymbol(furusato_simulation_amt_value));}
if(FurusatoOption.total_page_no==0){$("div.content_list_empty").show();}else{$("div.content_list_empty").hide();}
if(FurusatoOption.total_page_no>1){$("#btn_more_text").show();}else{$("#btn_more_text").hide();}
$('#selectbox_sort_type option').each(function(){if($(this).val()==$("hidden_sort_type").val()){$(this).prop('selected',true);}});$("#btn_furusato_amt_confirm").bind("click",function(e){var furusato_simulation_amt_value=Util.safeNumber($("#input_modify").val());var check_bool=Util.isNumber(furusato_simulation_amt_value);var check_length_bool=($('#input_modify').val().length>12)?true:false;if(!check_bool||check_length_bool){alert(MultiLang.findResource("숫자만 가능합니다"));$("#input_modify").val(0);}else
{if(furusato_simulation_amt_value!=undefined&&furusato_simulation_amt_value!="")
{Util.setCookie("furusato_simulation_amt",Util.safeNumber(furusato_simulation_amt_value));$("#span_furusato_limit_amt").html(PriceUtil.FormatCurrencySymbol(furusato_simulation_amt_value));$("#tooltip_guide1").hide();}}});},InitEventFunctionSetting:function(){this.BannerSwiperInit();this.EventSetting();this.BestSellerSwiper();$(window).bind('pageshow',function(){if($("#selectbox_sort_type option:selected").val()!=undefined&&$("#selectbox_sort_type option:selected").val()!="NEW_RANK_POINT"){FurusatoOption.page_no=1;FurusatoOption.sort_type=$("#selectbox_sort_type option:selected").val();$("#ul_furusato_goods_list").addClass("loading");RMSHelper.asyncCallWebObject(FurusatoOption.more_page_url+FurusatoOption.createQueryURL()+"&search_type=Furusato","post",null,FurusatoMain.initProcessCallBackResult);}});$(window).scroll(function(){if($(window).scrollTop()+$(window).height()>($(document).height()-2400)&&FurusatoOption.is_processing==false&&(FurusatoOption.total_page_no>FurusatoOption.page_no)){if(FurusatoOption.page_no>1){FurusatoMain.searchAppendItem();}}});$("#div_furusato_notice > p").bind("mouseover",function(e){clearInterval(furusato_notice_timer);});$("#div_furusato_notice > p").bind("mouseout",function(e){FurusatoNoticeAutoRolling();});},EventSetting:function(){$("#tooltip_guide1").hide();$("#ul_left_menu li").bind("mouseover",function(e){this.classList.add('selected');$("ul.furusato_nav").children('li').each(function(){if($(this).children('button').hasClass('selected')){$(this).children('button').removeClass('selected')}})}).bind("mouseout",function(e){this.classList.remove('selected');});$("li[id^='li_price_']").bind("click",function(e){var price_range=$(this).attr("price_range");FurusatoOption.page_no=1;FurusatoOption.price_range=price_range;var param_gdlc_cd=$("#hidden_gdlc_cd").val();var param_gdmc_cd=$("#hidden_gdmc_cd").val();var param_gdsc_cd=$("#hidden_gdsc_cd").val();FurusatoOption.gdlc_cd=param_gdlc_cd;FurusatoOption.gdmc_cd=param_gdmc_cd;FurusatoOption.gdsc_cd=param_gdsc_cd;FurusatoOption.sort_type=$("#selectbox_sort_type option:selected").val();document.location.href=FurusatoOption.search_page_url+FurusatoOption.createQueryURL();});$("li[id^='li_category_']").bind("click",function(e){var data_category_cd=$(this).attr("data-category-cd");var category_type=$(this).attr("data-category-type");if(category_type=="S"){FurusatoOption.gdsc_cd=data_category_cd;var parent_data_cd=$(this).attr("parent-data-cd");if(parent_data_cd!=undefined&&parent_data_cd!=null){FurusatoOption.gdmc_cd=parent_data_cd;}else{var hidden_gdmc_cd=$("#hidden_gdmc_cd").val();if(hidden_gdmc_cd!=undefined&&hidden_gdmc_cd!=null){FurusatoOption.gdmc_cd=hidden_gdmc_cd;}}
e.stopPropagation();e.preventDefault();}else if(category_type=="M"){FurusatoOption.gdmc_cd=data_category_cd;FurusatoOption.gdsc_cd="";}else{FurusatoOption.gdlc_cd=data_category_cd;}
FurusatoOption.price_range=0;FurusatoOption.region_large_cd="";FurusatoOption.region_medium_cd="";FurusatoOption.region_small_cd="";FurusatoOption.page_no=1;FurusatoOption.sort_type=$("#selectbox_sort_type option:selected").val();document.location.href=FurusatoOption.search_page_url+FurusatoOption.createQueryURL();});$("li[id^='li_region_']").bind("click",function(e){var data_region_cd=$(this).attr("data-region-cd");var data_region_type=$(this).attr("data-region-type");if(data_region_type=="S"){FurusatoOption.region_small_cd=data_region_cd;var data_parent_cd=$(this).attr("data-parent-cd");FurusatoOption.region_medium_cd=data_parent_cd;var data_region_lcd=$(this).closest("li[data-region-type=L]").attr("data-region-cd")
if(data_region_lcd!=undefined&&data_region_lcd!=null){FurusatoOption.region_large_cd=data_region_lcd;}
e.stopPropagation();e.preventDefault();}else if(data_region_type=="M"){var data_parent_cd=$(this).attr("data-parent-cd");FurusatoOption.region_medium_cd=data_region_cd;FurusatoOption.region_large_cd=data_parent_cd;FurusatoOption.region_small_cd="";e.stopPropagation();e.preventDefault();}else{FurusatoOption.region_large_cd=data_region_cd;FurusatoOption.region_small_cd="";FurusatoOption.region_medium_cd="";}
var price_range=Number($("#hidden_price_range").val());if(price_range==undefined||price_range==null){price_range=0;}
FurusatoOption.price_range=price_range;var param_gdsc_cd=$("#hidden_gdsc_cd").val();var param_gdmc_cd=$("#hidden_gdmc_cd").val();if(param_gdmc_cd!=""&&param_gdmc_cd!=undefined){FurusatoOption.gdmc_cd=param_gdmc_cd;}
if(param_gdsc_cd!=""&&param_gdsc_cd!=undefined){FurusatoOption.gdsc_cd=param_gdsc_cd;}
FurusatoOption.page_no=1;FurusatoOption.sort_type=$("#selectbox_sort_type option:selected").val();document.location.href=FurusatoOption.search_page_url+FurusatoOption.createQueryURL();});$("#ul_view_type li ").bind("click",function(){$(this).parents().children('li').removeClass("selected");$(this).addClass("selected");var view_class=$(this).children("button").attr("class");$("#ul_furusato_goods_list").removeClass("type1 type2");$("#ul_furusato_goods_list").addClass(view_class);});$("#ul_furusato_goods_list >  li > button").bind("click",function(){FurusatoMain.addWishList($(this));});$("#ul_title_filter li button").bind("click",function(){var selected_remove_id=$(this).attr("id");var param_gdsc_cd=$("#hidden_gdsc_cd").val();var param_gdmc_cd=$("#hidden_gdmc_cd").val();if(selected_remove_id=="li_price_remove"){FurusatoOption.price_range=0;$("#hidden_price_range").val(0);var param_region_large_cd=$("#hidden_region_large_cd").val();var param_region_medium_cd=$("#hidden_region_medium_cd").val();var param_region_small_cd=$("#hidden_region_small_cd").val();if(param_region_large_cd!=undefined&&param_region_large_cd!=null){FurusatoOption.region_large_cd=param_region_large_cd;}
if(param_region_medium_cd!=undefined&&param_region_medium_cd!=null){FurusatoOption.region_medium_cd=param_region_medium_cd;}
if(param_region_small_cd!=undefined&&param_region_small_cd!=null){FurusatoOption.region_small_cd=param_region_small_cd;}}else if(selected_remove_id=="li_region_remove"){FurusatoOption.region_large_cd="";FurusatoOption.region_medium_cd="";FurusatoOption.region_small_cd="";$("#hidden_region_large_cd").val("");$("#hidden_region_medium_cd").val("");$("#hidden_region_small_cd").val("");}
FurusatoOption.page_no=1;if(param_gdmc_cd!=undefined&&param_gdmc_cd!=null){FurusatoOption.gdmc_cd=param_gdmc_cd;}
if(param_gdsc_cd!=undefined&&param_gdsc_cd!=null){FurusatoOption.gdsc_cd=param_gdsc_cd;}
FurusatoOption.sort_type=$("#selectbox_sort_type option:selected").val();$("#hidden_sort_type").val(FurusatoOption.sort_type);$(this).parent('li').remove();$("#ul_furusato_goods_list").addClass("loading");RMSHelper.asyncCallWebObject(FurusatoOption.more_page_url+FurusatoOption.createQueryURL()+"&search_type=Furusato","post",null,FurusatoMain.initProcessCallBackResult);if(selected_remove_id=="li_price_remove"){$("#hidden_price_range").val("0");$("li[id^=li_price_] button").removeClass('active');}else{$("#hidden_region_large_cd").val("");$("#hidden_region_medium_cd").val("");$("#hidden_region_small_cd").val("");$("li[id^=li_region_] button").removeClass('active');}});$("#btn_more_text").bind("click",function(){FurusatoMain.searchAppendItem();});$('ul.furusato_nav > li > button').bind('click',function(){if($(this).hasClass("selected")){$(this).removeClass("selected");}else{$("ul.furusato_nav").children('li').each(function(){if($(this).children('button').hasClass('selected')){$(this).children('button').removeClass('selected');}});$(this).addClass("selected");}});$("#selectbox_sort_type").bind('change',function(){var param_gdsc_cd=$("#hidden_gdsc_cd").val();var param_gdmc_cd=$("#hidden_gdmc_cd").val();var param_price_range=$("#hidden_price_range").val();var param_region_large_cd=$("#hidden_region_large_cd").val();var param_region_medium_cd=$("#hidden_region_medium_cd").val();var param_region_small_cd=$("#hidden_region_small_cd").val();if(param_gdmc_cd!=undefined&&param_gdmc_cd!=null){FurusatoOption.gdmc_cd=param_gdmc_cd;}
if(param_gdsc_cd!=undefined&&param_gdsc_cd!=null){FurusatoOption.gdsc_cd=param_gdsc_cd;}
if(param_region_large_cd!=undefined&&param_region_large_cd!=null){FurusatoOption.region_large_cd=param_region_large_cd;}
if(param_region_medium_cd!=undefined&&param_region_medium_cd!=null){FurusatoOption.region_medium_cd=param_region_medium_cd;}
if(param_region_small_cd!=undefined&&param_region_small_cd!=null){FurusatoOption.region_small_cd=param_region_small_cd;}
FurusatoOption.price_range=param_price_range;FurusatoOption.page_no=1;FurusatoOption.sort_type=$("#selectbox_sort_type option:selected").val();$("#ul_furusato_goods_list").addClass("loading");RMSHelper.asyncCallWebObject(FurusatoOption.more_page_url+FurusatoOption.createQueryURL()+"&search_type=Furusato","post",null,FurusatoMain.initProcessCallBackResult);})},BannerSwiperInit:function(){var is_ie_version_9=false;if(Public.browser.msie&&Number(Public.browser.version)<=9){is_ie_version_9=true;}
var slide_li_cnt=$("#div_furusato_main_banner ul li").length;var random_idx=1;if(is_ie_version_9){$("#div_furusato_main_banner ul li").eq(random_idx).show();}
if(slide_li_cnt<=1||is_ie_version_9){var indicator_html="";if(slide_li_cnt>1){$("#div_furusato_main_banner ul li").each(function(index){if(index==random_idx){indicator_html+="<span class='current'>"+random_idx+"</span>";}});indicator_html+=" / <span class=\"total\">"+$("#div_furusato_main_banner ul li").length+"</span>";$("#div_p_paging").append(indicator_html);}}else{var swiperOption={autoplay:5000,autoplayDisableOnInteraction:true,loop:true,nextButton:'.furusato_topswiper .swiper_button.next',prevButton:'.furusato_topswiper .swiper_button.prev',pagination:'.furusato_topswiper .swiper_pagination p',paginationType:'fraction',slidesPerView:1,};var banner_swiper=SlideHelper.CreateSlide("#div_furusato_main_banner",swiperOption);$("#div_furusato_main_banner .swiper_button.autoplay").bind("click",function(){this.classList.toggle('selected');if(this.classList.contains('selected')===true){banner_swiper.stopAutoplay();}else{banner_swiper.startAutoplay();}});}},BestSellerSwiper:function(){var swiperOption={loop:false,spaceBetween:31,slidesPerView:3,slidesPerGroup:3,autoplayDisableOnInteraction:true,nextButton:'.content_right .swiper_button.next',prevButton:'.content_right .swiper_button.prev',pagination:'.content_right .swiper_pagination p',paginationType:'fraction'};SlideHelper.CreateSlide("#div_furusato_bestseller",swiperOption);},autoNoticeRolling:function(){if($("#div_furusato_notice")!=undefined&&$("#div_furusato_notice")!=null&&$("#div_furusato_notice > p").length>0){var notice_total_length=$('#div_furusato_notice > p').length;var selected_notice_idx=0;$('#div_furusato_notice > p').each(function(){if($(this).hasClass('selected')){selected_notice_idx=$(this).index();}})
if(selected_notice_idx>=notice_total_length){selected_notice_idx=0;}
$('#div_furusato_notice > p').removeClass('selected');$('#div_furusato_notice > p').eq(selected_notice_idx).addClass('selected');}},searchAppendItem:function(){if(FurusatoOption.page_no<=FurusatoOption.total_page_no){if(FurusatoOption.is_processing){return;}
$("#spn_loading_img").show();$("#spn_btn_text").text(MultiLang.findResource("로딩중"));FurusatoOption.page_no++;FurusatoOption.page_size=60;FurusatoOption.is_processing=true;FurusatoOption.price_range=$("#hidden_price_range").val();FurusatoOption.sort_type=$("#selectbox_sort_type option:selected").val();RMSHelper.asyncCallWebObject(FurusatoOption.more_page_url+FurusatoOption.createQueryURL()+"&search_type=Furusato","post",null,FurusatoMain.processCallBackResult);}},processCallBackResult:function(result,svc,xmlHttp){FurusatoOption.is_processing=false;if(result!=null&&result!=undefined){$("#spn_loading_img").hide();$("#ul_furusato_goods_list li").last().after(result);if(FurusatoOption.page_no==FurusatoOption.total_page_no){$("#btn_more_text").hide();}else{$("#spn_btn_text").text(MultiLang.findResource("더보기"));}}},initProcessCallBackResult:function(result,svc,xmlHttp){$("div.content_list_empty").hide();$("#ul_furusato_goods_list li").remove();$("#ul_furusato_goods_list").removeClass("loading");$("#ul_furusato_goods_list").append(result);if(Number(xmlHttp.getResponseHeader("TotalPage"))!=undefined&&Number(xmlHttp.getResponseHeader("TotalPage"))>0){FurusatoOption.total_page_no=Number(xmlHttp.getResponseHeader("TotalPage"));$("#span_search_result_count").html("("+Util.getNumberFormat(FurusatoOption.total_page_no)+"個)");$("#li_item_total_size").html(Util.getNumberFormat(FurusatoOption.total_page_no)+MultiLang.findResource("script items are founded"));}
if(FurusatoOption.price_range==0&&FurusatoOption.region_large_cd==""&&FurusatoOption.region_medium_cd==""&&FurusatoOption.region_small_cd=="")
{$("#div_display_banner").show();}},goLogin:function(){Util.openPopup(Public.convertNormalUrl("~/Login/PopupLogin.aspx")+"?ReturnUrl=target=opener;reload:",650,470);},goRegister:function(){Util.openPopup(Public.convertNormalUrl("~/Login/PopupLogin.aspx?tab_idx=1")+"&ReturnUrl=target=opener;reload:",650,470);},addWishList:function(obj){var gd_no=$(obj).parents().attr("data-gd-no");if($(obj).hasClass("selected")){if(Public.isLogin()){var resultData=RMSHelper.dynamic.executeNonQuery("My.DeleteWishGroupItem",RMSParam.create().add("group_id",0).add("gd_no",gd_no).add("auction_no",0),function(resultData){$(obj).removeClass("selected");})}
else{FurusatoMain.removeCookieWishGoods($(obj),gd_no,0);}}else{Util.AddToWishList(Public.getCustNo(),0,gd_no,Public.getLoginId(),function(ret){if(ret==0){$(obj).addClass("selected");return false;}});}},removeCookieWishGoods:function(){var ezwish=Util.getCookie("ezwish").split(",");var new_ezwish="";for(var i=0;i<ezwish.length;i++){var gd_auction=ezwish[i];if(gd_auction.indexOf("!")>0){new_ezwish+=gd_auction+",";}else{new_ezwish+=gd_auction+"!0,";};};var gd_no_to_delete=gd_no+"!"+auction_no;new_ezwish=new_ezwish.replace(gd_no_to_delete+",","");Util.setCookie("ezwish",new_ezwish);}}